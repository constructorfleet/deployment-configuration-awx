---
# Common Variables
organizations:
  - name: Default
    usergroups:
      - name: administrators
        admin: true
        ldap_cn: admin
      - name: managers
        roles:
          - Manager
        ldap_cn: users
    locations:
      - name: Default
      - name: Warehouse A
      - name: ITC

domains:
  - name: dev.home.prettybaked.com
    description: Development Domain

  - name: home.prettybaked.com
    description: Production Domain

default_proxies_enabled:
  - tftp
  - remote_execution
  - discovery
  - httpboot

secondary_dns_address: 4.2.2.1

subnets:
  - name: 10.0.10.0/24
    description: PROD VLAN 10
    bridge_interface: br10
    gateway: 10.0.10.1
    boot_mode: DHCP
    vlan_id: 10
    domains:
      - home.prettybaked.com
      - dev.home.pretybaked.com
    tftp_proxy: "smart-proxy"
    remote_execution_proxies: "smart-proxy"
    discovery_proxy: "smart-proxy"
    httpboot_proxy: "smart-proxy"
  - name: 10.0.100.0/24
    description: Development subnet representation of VLAN 10
    bridge_interface: br0
    gateway: 10.0.100.1
    boot_mode: DHCP
    domains:
      - dev.home.prettybaked.com
    tftp_proxy: "smart-proxy"
    remote_execution_proxies: "smart-proxy"
    discovery_proxy: "smart-proxy"
    httpboot_proxy: "smart-proxy"
  - name: 10.0.120.0/23
    description: Development subnet representation of VLAN 12
    bridge_interface: 120
    gateway: 10.0.120.1
    vlan_id: 120
    boot_mode: DHCP
    domains:
      - dev.home.prettybaked.com
    tftp_proxy: "smart-proxy"
    remote_execution_proxies: "smart-proxy"
    discovery_proxy: "smart-proxy"
    httpboot_proxy: "smart-proxy"
  - name: 10.0.140.0/24
    description: Development subnet representation of VLAN 14
    bridge: 140
    gateway: 10.0.140.1
    vlan_id: 1140
    boot_mode: DHCP
    domains:
      - dev.home.prettybaked.com
    tftp_proxy: "smart-proxy"
    remote_execution_proxies: "smart-proxy"
    discovery_proxy: "smart-proxy"
    httpboot_proxy: "smart-proxy"

hostgroups:
  - name: all
    description: Parent of all the groups
    children:
      - name: foreman
        description: Builds and configures hosts
      - name: awx
        description: Bare metal hosts

user_group_hierarchy: |
  {%- set ns = namespace(groups=[]) -%}
  {%- macro recurse(hostgroup_spec,current,parent) -%}
    {%- for group_spec in hostgroup_spec -%}
      {%- if group_spec.children is defined -%}
        {%- set children = group_spec.pop('children') -%}
        {{
          recurse(
            children,
            [current + [group_spec | combine({'parent': parent})]],
            group_spec.name
          )
        }}
      {%- else -%}
        {%- set ns.groups = [ns.groups + [current + [group_spec | combine({'parent': parent})]]] -%}
        {{ [current + [group_spec | combine({'parent': parent})]] }}
      {%- endif -%}
    {%- endfor -%}
  {%- endmacro -%}
  {%- set x = recurse(hostgroups, [], None) -%}
  {{ ns.groups | flatten }}

# Foreman Common Properties
foreman:
  url: 'https://10.0.100.25'
  validate_certs: false
  admin_username: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          61306132376636316637326464616438363638353565333836633561303132323364643531393066
          6461613539373333366663353339313364343030623564650a323238343064376634636561626232
          38376239363164653661323066303333333932343131393862303934353433376138613132663762
          3233396136623838390a346133666631613635383961316266393763613332663765353538383361
          3765
  admin_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          33643032623362303131663736333066346163626536306361653062613236656136393664313430
          3534326365623334636561366366383232326432613731370a623631633831336165393730646463
          39623039383837363134363231623763616362316563396632386463343534343835353363626661
          3837663239373561390a353564393639373038316536306530643038663265333130373139373239
          33626639306564613839666131363432336365636336383539613536643163373430
  bmc_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          37646631366639373332326162636538346363363231623434656233663831623165316639343837
          3536353964663433383665326565363462393066373737360a366431323133613831366462326530
          31623165663665393730383837353039313234653437306636316337306331656561663438613964
          6131363161326266370a323930323531323532613339303237323265643137356438356462356430
          6663

# AWX Common Properties
awx_docker_compose_dir: /var/lib/awxcompose
awx_postgres_data_dir: /var/lib/awxpostgres
awx_project_data_dir: /etc/ansible
awx:
  url: 'http://{{ ansible_default_ipv4.address }}'
  port: 8080
  validate_certs: false
  admin_user: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          36306333343663313037333564373966633238646231626538626530353530616237633930393331
          6639636232303830613661353932633231373161633839640a326234666230303934376230323464
          38613330336238306664323965333761643761353039633338626362666238646331316239313364
          3330666431343731300a376339383564656637343033353764663333616137333966313330663239
          3334
  admin_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          66343636316534613935306539376363373063616535346330613636383163353435336233363463
          3538383735373262356137663566323938363764616336380a653537303866643637333132356131
          62393062356563323464346430326166643965636530626264356564643038653563393835626438
          3934313434633762340a376566326635333931623332356361346339613464313561393437386130
          3636
vault_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          39326362396531313334346562353434666336653133323538326231633466353264616365346430
          3064666635306634626665353233346133633965363461650a643163376633656137353831633531
          37326632653233383761326364663833323135623931393630366363643565343161343236303932
          6237613636353266640a613666346464663638336238373837376665376363353035353433353562
          3966
awx_server_url: '{{ awx.url  }}:{{ awx.port }}'

# Variables for Implementing LDAP Authentication
ldap_server: ldap.home.prettybaked.com
ldap_server_port: 389
ldap_server_tls: false
ldap_base_dn: 'dc={{ ",dc=".join( ldap_server.split(".")) }}'

ldap_authentication:
  host: 10.0.10.15
  server: '{{ ldap_server }}'
  server_port: '{{ ldap_server_port }}'
  server_tls: false
  account_dn: 'cn=Manager,{{ ldap_base_dn }}'
  account_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          32326562353861373434393865323461393836333265666138656664353235643630646461613835
          3336623364303931653339633933346162643733313931660a316561386437643230623636373833
          63383834616230353932643366356639343361623337366533306566353630616430323365313864
          6133663831656161330a653762626463353132393736643731363930373465663032363635373630
          65316164666132326464383233346365633662653335663163663066636638383237666437316235
          3336353165313736666431306539643061623639666263363264
  base_dn: '{{ ldap_base_dn }}'
  groups_base: 'ou=groups,{{ ldap_base_dn }}'
  users_base: 'ou=users,{{ ldap_base_dn }}'
  attr_login: uid
  attr_firstname: givenName
  attr_lastname: sn
  attr_mail: mail
  attr_photo: jpegPhoto
