---
# Common Variables
organizations:
  - name: Default
    usergroups:
      - name: administrators
        admin: true
        ldap_cn: admin
      - name: managers
        roles:
          - Manager
        ldap_cn: users
    locations:
      - name: Default
      - name: Warehouse A
      - name: ITC

domains:
  - name: dev.home.prettybaked.com
    description: Development Domain

  - name: home.prettybaked.com
    description: Production Domain

default_proxies_enabled:
  - tftp
  - remote_execution
  - discovery
  - httpboot

secondary_dns_address: 4.2.2.1

subnets:
  - name: 10.0.10.0/24
    description: PROD VLAN 10
    bridge_interface: br10
    gateway: 10.0.10.1
    boot_mode: DHCP
    vlan_id: 10
    domains:
      - home.prettybaked.com
      - dev.home.pretybaked.com
    tftp_proxy: "smart-proxy"
    remote_execution_proxies: "smart-proxy"
    discovery_proxy: "smart-proxy"
    httpboot_proxy: "smart-proxy"
  - name: 10.0.100.0/24
    description: Development subnet representation of VLAN 10
    bridge_interface: br0
    gateway: 10.0.100.1
    boot_mode: DHCP
    domains:
      - dev.home.prettybaked.com
    tftp_proxy: "smart-proxy"
    remote_execution_proxies: "smart-proxy"
    discovery_proxy: "smart-proxy"
    httpboot_proxy: "smart-proxy"
  - name: 10.0.120.0/23
    description: Development subnet representation of VLAN 12
    bridge_interface: 120
    gateway: 10.0.120.1
    vlan_id: 120
    boot_mode: DHCP
    domains:
      - dev.home.prettybaked.com
    tftp_proxy: "smart-proxy"
    remote_execution_proxies: "smart-proxy"
    discovery_proxy: "smart-proxy"
    httpboot_proxy: "smart-proxy"
  - name: 10.0.140.0/24
    description: Development subnet representation of VLAN 14
    bridge: 140
    gateway: 10.0.140.1
    vlan_id: 1140
    boot_mode: DHCP
    domains:
      - dev.home.prettybaked.com
    tftp_proxy: "smart-proxy"
    remote_execution_proxies: "smart-proxy"
    discovery_proxy: "smart-proxy"
    httpboot_proxy: "smart-proxy"

hostgroups:
  - name: base
    description: Parent of all the groups
    children:
      - name: buildsr
        description: Builds and configures hosts
      - name: physical
        description: Bare metal hosts
        children:
          - name: hypervisor
            description: Host capable of virtualization
          - name: storage
            description: Storage device
          - name: machine-learning
            description: Automation, ML/AI
      - name: virtual
        description: Virtualized guest hosts
        children:
          - name: libvirt
            description: KVM virtual machine
            children:
              - name: buildservices
                descripiton: Build services host
                children:
                  - name: foreman
                    description: Foreman Instance
                  - name: awx
                    description: AWX Instancee
                description: Foreman Host Classifier and Build Service
          - name: ovirt
            description: oVirt virtual machine

user_group_hierarchy: |
  {%- set ns = namespace(groups=[]) -%}
  {%- macro recurse(hostgroup_spec,current,parent) -%}
    {%- for group_spec in hostgroup_spec -%}
      {%- if group_spec.children is defined -%}
        {%- set children = group_spec.pop('children') -%}
        {{
          recurse(
            children,
            [current + [group_spec | combine({'parent': parent})]],
            group_spec.name
          )
        }}
      {%- else -%}
        {%- set ns.groups = [ns.groups + [current + [group_spec | combine({'parent': parent})]]] -%}
        {{ [current + [group_spec | combine({'parent': parent})]] }}
      {%- endif -%}
    {%- endfor -%}
  {%- endmacro -%}
  {%- set x = recurse(hostgroups, [], None) -%}
  {{ ns.groups | flatten }}

# Foreman Common Properties
foreman:
  url: 'https://10.0.100.25'
  validate_certs: false
  admin_username: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          64386661616265363933633363626539653839313038356135376662393937636633303032366433
          3432656437373138643737643564366461346666316639360a646132326135353033393435356364
          31343232306263613832363737346230333862366362643238666363343031376163336263303738
          3937613630666565380a346465326132613463356138643931393665303533333762633830373965
          3433
  admin_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          66323832646361653365373162666630636433363732333337656663333938613464393838633734
          6263646363623731356133653332363739396534373065630a303532623266623364383461633739
          33663365376663643832343062343362643831623437323765623733373732323137363530656432
          6138346435636264620a613863333764643130356232343339646663356236633862353332383335
          39396231653236373731623330343062356463346462316634326334333836303635
  bmc_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          32613638636263613236643565646632396336383533636537386361326362653037373663303635
          3366316437363336343830333165386261363337396638360a633864383064323030653666336634
          39633031393734366639366336373932616165316263656432333437636265663831393366666561
          3034663765636536650a623738633761613964363830373264326537653338313739613131383230
          63366464646331386539666465323431653830386363653961316337633333323834

# AWX Common Properties
awx_docker_compose_dir: /var/lib/awxcompose
awx_postgres_data_dir: /var/lib/awxpostgres
awx_project_data_dir: /etc/ansible
awx:
  url: 'http://{{ ansible_default_ipv4.address }}'
  port: 8080
  validate_certs: false
  admin_user: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          66663738633236616563346464303163376364663234313433626130313234663332386465323436
          3664663935356633626332633338643163653233383937350a626163616266373762396639353637
          35656166393634653261376538656330666564333931346132333533333663313737623834343538
          6239393061353437620a383539336364636637623630656565646437343734303133333763316434
          6666
  admin_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          65356234386564633839613038336338343263646339323733653237383933353366363965373438
          6133316230636136313736393833303963343565663233300a353738363532373665633234306337
          63366263663261303939646331313561386630356437653862633839323035393338643031643964
          6164663066626664390a326136633235393766326638333765323434663765376634386635373638
          3732
vault_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          35333030363032303365393664393937663561343036333335616565613461636332666138636537
          3335336366356630343732623733333639326539626339340a376137346436346236643136376337
          34396632333861393733376334343737376337303030666133633565366565353365363666346532
          3661306562643932360a626230393366326665393331626430353839343234626531623337336432
          34373230396462376561306135356530616639323032643736653232323837383734
awx_server_url: '{{ awx.url  }}:{{ awx.port }}'

# Variables for Implementing LDAP Authentication
ldap_server: ldap.home.prettybaked.com
ldap_server_port: 389
ldap_server_tls: false
ldap_base_dn: 'dc={{ ",dc=".join( ldap_server.split(".")) }}'

ldap_authentication:
  host: 10.0.10.15
  server: '{{ ldap_server }}'
  server_port: '{{ ldap_server_port }}'
  server_tls: false
  account_dn: 'cn=Manager,{{ ldap_base_dn }}'
  account_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          33666161653335333936383062646165623662663135623135386266663134623561643739316430
          6138646336376362613630336561623937613530643962370a346535336264386239306363626561
          33626232306634663230393366333564366237376536323330383839313538333832646361303930
          3030336466333762640a366362303164656133313433393037613433613737363839383439653165
          35626334396262343133633939393061303939343538393631633633626133303338643864626564
          6530643466666464383037633766303131643266363061663565
  base_dn: '{{ ldap_base_dn }}'
  groups_base: 'ou=groups,{{ ldap_base_dn }}'
  users_base: 'ou=users,{{ ldap_base_dn }}'
  attr_login: uid
  attr_firstname: givenName
  attr_lastname: sn
  attr_mail: mail
  attr_photo: jpegPhoto
